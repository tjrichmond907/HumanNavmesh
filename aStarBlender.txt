'''
Copy this script into a belnder text window, and hit the play button. 
The text file generated from graphTraversal.py called a_star_path.txt 
and the saved blender file should be in the same folder. 

your points shoul dbe visible

To connect the imported points:
*download the Dataline.blend file from the video (links the node tree)
    - link the dataline to the nodes:
        file->append->gn_data_line.blend
    - open the modifiers tab 
        - add modifier -> geometry Nodes
        -On the little pill shape tab on the left, select 'create data graph'
    -Should be a Line!


folllows this video https://www.youtube.com/watch?v=wEj7cfwL6RY
'''



import bpy
import pathlib
import csv

# file neighbourhood
file_loc = pathlib.Path(__file__).parent.resolve()     # this blender file
folder = pathlib.Path(file_loc).parent.resolve()       # folder file is in
#parent_folder = pathlib.Path(__file__).parents[3]      # parent folder, number at end indicates how far up to go

# construct path for data paths
#path of the text file generated by graphTraversal.py
data = pathlib.Path(folder).joinpath('a_star_path.txt')

# Blender collection for data
data_coll = bpy.data.collections['Collection']

for ob in data_coll.objects:
    bpy.data.objects.remove(ob)

vertices = []
edges = []
faces = []

#read csv
with open(data, 'r') as filehandle:
    for line in filehandle:
        line = line.split(',')
        vertices.append((float(line[0]), float(line[1]), float(line[2])))
        
        
new_mesh = bpy.data.meshes.new('data')
new_mesh.from_pydata(vertices, edges, faces)
new_mesh.update()

new_object = bpy.data.objects.new('a_star_path', new_mesh)
data_coll.objects.link(new_object)

